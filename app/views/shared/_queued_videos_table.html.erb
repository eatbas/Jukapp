<div id="queue">
  <% if queued_videos.present? %>
    <% queued_videos.each_with_index do |queued_video, index| %>
      <div class="table-row">
        <paper-shadow>
          <core-toolbar class="table-row-toolbar">
            <span flex>
              <%= truncate(queued_video.video.title, length: 54) %>
            </span>
            <% if owner? %>
              <%= form_tag queued_video, method: :delete, remote: true do %>
                <paper-icon-button icon="delete" class="delete-queue"></paper-icon-button>
              <% end %>
            <% end %>
          </core-toolbar>
        </paper-shadow>
      </div>
    <% end %>
  <% end %>
</div>

<script>
  $(function() {
    $(".delete-queue").unbind("click.deleteQueue").bind("click.deleteQueue", function() {
      $(this).closest("form").submit();
    });
  });
</script>
